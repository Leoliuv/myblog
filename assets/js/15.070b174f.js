(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{198:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h4",{attrs:{id:"mysql同步复制配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql同步复制配置","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL同步复制配置")]),s._v(" "),t("h5",{attrs:{id:"mysql半同步复制配置主从"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql半同步复制配置主从","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL半同步复制配置主从")]),s._v(" "),t("h6",{attrs:{id:"_1-安装插件（主从服务器都需要安装）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装插件（主从服务器都需要安装）","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.安装插件（主从服务器都需要安装）")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql> install plugin rpl_semi_sync_master soname 'semisync_master.so';\nmysql> set global rpl_semi_sync_master_enabled = 1;\nmysql> show plugins;\n")])])]),t("h6",{attrs:{id:"_2-修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改配置文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.修改配置文件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("主：\nrpl_semi_sync_master_enabled = 1\nrpl_semi_sync_master_timeout = 1000\n从：\nrpl_semi_sync_slave_enabled = 1\n")])])]),t("h6",{attrs:{id:"_3-重启服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-重启服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.重启服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./bin/mysqladmin -u root -proot -h123.0.0.1 -P21000 shutdown\n./bin/msyqld_safe --defaults-file=/paas/iddbs/liuli/mydql01/mysql/etc/my21000.cnf &\n")])])]),t("h6",{attrs:{id:"_4-登入mysql进行配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-登入mysql进行配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 4.登入MySQL进行配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./bin/mysql -u root -proot -h127.0.0.1 -P21000 \nmysql> change master to\nmysql> master_host='172.18.238.117', master_port=22000, master_user='root', master_password='root',\nmysql> master_log_file='log-bin.000005', master_log_pos=123;\nmysql> start slave;\nmysql> show slave status;\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("master_log_pos通过在22000的主机上查看：\nshow master status;\n主从安装相同的方式进行配置\n")])])]),t("h5",{attrs:{id:"mysql通过gtid方式进行复制配置主从"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql通过gtid方式进行复制配置主从","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL通过GTID方式进行复制配置主从")]),s._v(" "),t("p",[s._v("MySQL5.6一个重要的功能点就是引入了全局事务标识符（GTIDs）。引入GTIDs主要的目的是支持无缝故障转移和正常切换，最小化人工干预和服务的中断。GTIDs(全局事务标识符)。")]),s._v(" "),t("h6",{attrs:{id:"_1-修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.修改配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("gtid-mode = on\t##开启GTID模式\nenforce-gtid-consistency = on\t\t##强制gtid一致性，开启后对于特定create table不被支持\nmaster-info-repository = table\nrelay-log-info-repository = table\nbinlog_format\t= row \t##强烈建议，其他格式可能造成数据不一致\nskip-slave-start = 1\n")])])]),t("h6",{attrs:{id:"_2-登入mysql进行配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-登入mysql进行配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 2.登入MySQL进行配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./bin/mysql -u root -proot -h127.0.0.1 -P21000 \nmysql> change master to\nmysql> master_host='172.18.238.117', master_port=22000, master_user='root', master_password='root',\nmysql> master_log_file='log-bin.000005', master_log_pos=123;\n")])])]),t("h6",{attrs:{id:"_3-启动slave查看状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动slave查看状态","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.启动slave查看状态")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql> start slave;\nmysql> show slave status;\n")])])]),t("p",[s._v("​\tSlave_IO_Running和Slave_SQL_Running均为Yes，代表主从配置成功.")])])},[],!1,null,null,null);a.default=r.exports}}]);