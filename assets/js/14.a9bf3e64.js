(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{187:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h4",{attrs:{id:"mysql主从复制配置（异步）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql主从复制配置（异步）","aria-hidden":"true"}},[a._v("#")]),a._v(" MySQL主从复制配置（异步）")]),a._v(" "),t("p",[t("em",[a._v("通过mysql安装的方式再安装一个22000的MySQL")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bin/mysqld --initialize-insecure --basedir=/paas/iddbs/liuli/mysql01/mysql --datadir=/paas/iddbs/liuli/mysql01/mysql/22000/\n")])])]),t("h6",{attrs:{id:"_1、登录主mysql（21000-查看相关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、登录主mysql（21000-查看相关配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 1、登录主MySQL（21000)查看相关配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("bin/mysql -uroot --socket=/paas/iddbs/liuli/mysql01/mysql/21000/mysql.sock -uroot\nshow master status\\G\n")])])]),t("h6",{attrs:{id:"_2、登录从mysql-22000-进行mysql配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、登录从mysql-22000-进行mysql配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 2、登录从MySQL(22000)进行mysql配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("change master to\nmaster_host='172.18.231.117',#主机IP\nmaster_port=21000,#主端口\nmaster_user='mysql',\nmaster_password='mysql',\nmaster_log_file='mysql-bin.000001',\nmaster_log-pos=**；#从主mysql中查出\n")])])]),t("h6",{attrs:{id:"_3、启动slave，查看状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、启动slave，查看状态","aria-hidden":"true"}},[a._v("#")]),a._v(" 3、启动slave，查看状态")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("start slave；\nshow slave status\\G\n")])])]),t("p",[t("em",[a._v("如图表示异步主从复制配置成功")])]),a._v(" "),t("h4",{attrs:{id:"mysql主主复制配置（异步）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql主主复制配置（异步）","aria-hidden":"true"}},[a._v("#")]),a._v(" MySQL主主复制配置（异步）")]),a._v(" "),t("h6",{attrs:{id:"_1、修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、修改配置文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 1、修改配置文件")]),a._v(" "),t("pre",[t("code",[a._v("---------\n按照主从再进行配置即可\n下面参数可以加也可不加\n---------\n```\n主：\n#[M-M-asynchronous]\nauto-increment-increment    =2\nauto-increment-offset       =1\n从：\n#[M-M-asynchronous]\nauto-increment-increment     =2\nauto-increment-offset        =2\n```\n")])]),a._v(" "),t("h6",{attrs:{id:"_2、查看主-从mysql配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、查看主-从mysql配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 2、查看主\\从MySQL配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("\tshow master status\\G\n")])])]),t("h6",{attrs:{id:"_3、登录21000-22000进行配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、登录21000-22000进行配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 3、登录21000\\22000进行配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("change master to\nmaster_host='172.18.231.117',#主机IP\nmaster_port=21000,#主端口\nmaster_user='mysql',\nmaster_password='mysql',\nmaster_log_file='mysql-bin.000001',\nmaster_log-pos=**；#从主mysql中查出\n")])])]),t("h6",{attrs:{id:"_4、重新启动服务、启动slave、查看状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、重新启动服务、启动slave、查看状态","aria-hidden":"true"}},[a._v("#")]),a._v(" 4、重新启动服务、启动slave、查看状态")]),a._v(" "),t("p",[t("img",{attrs:{src:"/ph/1569833081432.png",alt:"1569833081432"}})]),a._v(" "),t("p",[t("em",[a._v("如图双主配置成功")])]),a._v(" "),t("p",[t("em",[a._v("MySQL主从级联复制（21000,22000,23000）\n配置成级联复制，来迁移数据，也方便切换")])]),a._v(" "),t("p",[a._v("**\n错误：cannot be set when MASTER_AUTO_POSITION is active.\n解决：change master to master_auto_position=0;\n错误：unknown variable 'rpl_semi_sync_slave_enabled=1'\n解决：plugin-load= \"semisync_slave.so\"\n问题：Got fatal error 1236 from master when reading data from binary log: 'Could not find first log file n\n解决：需要先通过flush logs；在进行配置。")])])},[],!1,null,null,null);s.default=r.exports}}]);